import{a as l}from"./axios-CCb-kr4I.js";import"./index-VWaDGczM.js";import{_ as p,c as i,a as n,t as a,F as m,r as _,d as c,b as f,o as r}from"./index-DNek7CxD.js";const g={props:["stid","yname"],data(){return{tdata:null,currindex:0,userp:0,ise:!1,d:null}},mounted(){l.post("/user/get/test",{stid:this.stid}).then(e=>{e.data&&e.data.ft?(this.tdata=e.data.ft,console.log("Test data got: ",this.tdata)):console.error("No data found in response")}).catch(e=>{console.error("Error at got some test data: ",e)})},methods:{Next(e){console.log(`Current question index: ${this.currindex}`),console.log(`Selected answer index: ${e}`);const t=this.tdata.questions[this.currindex],o=Number(t.Points);this.currindex<this.tdata.questions.length-1?(console.log(`Current question points: ${o}`),console.log(`Is correct answer: ${t.answers[e].TF}`),t.answers[e].TF&&(isNaN(o)?console.error(`Invalid points value after conversion: ${o}`):(this.userp+=o,console.log(`Correct answer! Points added: ${o}. Total points: ${this.userp}`))),this.currindex++):(console.log(`Final question points: ${o}`),console.log(`Is correct answer on the final question: ${t.answers[e].TF}`),t.answers[e].TF&&(isNaN(o)?console.error(`Invalid points value after conversion: ${o}`):(this.userp+=o,console.log(`Correct answer on the last question! Points added: ${o}. Total points: ${this.userp}`))),this.ise=!0,this.EndTest())},async EndTest(){if(this.ise){const e={testname:this.tdata.name,yName:this.yname,points:this.userp,uid:this.tdata.uid};try{const t=await l.post("/user/send/test",{message:{e1:`Test name: ${e.testname}`,e2:`People: ${e.yName}`,e3:`Points: ${e.points}`},uid:e.uid});console.log("Succefuly test send: ",t)}catch(t){console.error("Error to send test: ",t)}}}},watch:{}},x={id:"dh1"},v={id:"dhc1"},q={key:0},w={key:1},y={id:"dh2"},N={key:0,id:"form",class:"slide-in"},T=["onClick"],k={key:0,id:"modal"},b={class:"modal-content"},C={for:""};function F(e,t,o,E,s,u){return r(),i("main",null,[n("div",x,[n("div",v,[s.tdata&&s.tdata.questions&&s.tdata.questions.length>0?(r(),i("h2",q,a(s.tdata.questions[s.currindex].name),1)):(r(),i("h2",w,"Завантаження..."))])]),n("div",y,[s.tdata&&s.tdata.questions&&s.tdata.questions.length>0?(r(),i("div",N,[(r(!0),i(m,null,_(s.tdata.questions[s.currindex].answers||[],(h,d)=>(r(),i("li",{onClick:I=>u.Next(d),id:"f-dh1",key:d},[n("label",null,a(h.name),1)],8,T))),128))])):c("",!0)]),s.ise?(r(),i("div",k,[n("div",b,[n("h1",null,a(s.tdata.name),1),n("h2",null,"Тест створив "+a(s.tdata.tname),1),t[0]||(t[0]=f()),t[1]||(t[1]=n("br",null,null,-1)),n("h3",C,"Ваші бали: "+a(s.userp),1)])])):c("",!0)])}const V=p(g,[["render",F],["__scopeId","data-v-7bb5bdcc"]]);export{V as default};
