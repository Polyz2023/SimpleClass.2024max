import{a as x}from"./axios-CCb-kr4I.js";import{j as Q}from"./index-VWaDGczM.js";import{M as V}from"./MessageBox-CDpAQQZ0.js";import{_ as c,c as n,a as N,n as T,b as t,h as M,t as C,e as b,F as k,g as h,d as u,w as p,v as f,r as q,o as i}from"./index-Df8Cqa_7.js";const F={components:{MessageBoxVue:V},data(){return{TName:null,TP:0,stid:`${Math.floor(Math.random()*99999999)+1}`,questions:[{name:"Do you like SimpleClass? ^^",Points:0,NUMS:1,img:null,answers:[{name:"No (i am very angry)",TF:!1},{name:"Yes (i am very fun)",TF:!0}]}],selectedQ:null,usdata:null,msg:{type:"info",message:"Test",msg_:"z_Minus"}}},mounted(){const s=localStorage.getItem("SC-token");if(s)try{const e=Q(s);this.usdata=e,console.log("Decodet data at mounted: ",e)}catch(e){console.error("Error decoded data at mounted: ",e)}},methods:{handleClickOutside(s){this.$refs.form.contains(s.target)||(this.selectedQ=null)},async publishTest(){this.updateTotalPoints();try{const s=await x.post("/user/create/test",{TName:this.TName,stid:this.stid,questions:this.questions,uid:this.usdata.user_id,TP:this.TP});this.MSGAnim("Тест опубліковано","success"),console.log("Create test successfully:",s)}catch(s){console.error("Error at creating test: ",s)}},addQuestion(){this.questions.push({name:"",Points:1,NUMS:0,img:null,answers:[{name:"Нове питання",TF:!1}]}),this.updateTotalPoints(),this.$nextTick(()=>{this.handleDivClick(this.questions.length-1)})},addV(){this.questions[this.selectedQ].answers.push({name:"New answer",TF:!1})},SelectQ(s){this.selectedQ=s},delQ(){this.questions.splice(this.selectedQ,1),this.selectedQ=null,this.updateTotalPoints()},printStr(s){console.log(s)},SelectV(s){const e=this.questions[this.selectedQ];e&&(e.answers.forEach((m,g)=>{g===s&&(m.TF=!m.TF,m.TF?e.NUMS+=1:e.NUMS-=1)}),console.log(this.questions))},updateTotalPoints(){this.TP=this.questions.reduce((s,e)=>s+(Number(e.Points)||0),0)},MSGAnim(s,e){this.msg.message=s,this.msg.type=e,this.msg.msg_="",this.$nextTick(()=>{this.msg.msg_="z_Plus",setTimeout(()=>{this.msg.msg_="z_Minus"},3e3)})},handleDivClick(s){let e=document.getElementById("fileInput"+s);e?e.click():console.error("File input не найден")},handleFileChange(s,e){const m=s.target.files[0];if(m){const g=new FileReader;g.onloadend=()=>{this.questions[e].img=g.result},g.readAsDataURL(m)}}},watch:{questions:{handler(){this.updateTotalPoints()},deep:!0}}},P={id:"dh1"},S={id:"dhc1"},D={id:"dh2"},U={id:"form",ref:"form",class:"slide-in"},I={style:{"margin-right":"20px"}},z={id:"dh3"},B={key:0,id:"dhc1",style:{"margin-left":"10px"}},E={class:"ee1",style:{"background-color":"rgba(15, 6, 73, 0.567)","font-size":"13px"}},j={for:""},A={key:1,id:"dhc1",style:{"margin-left":"10px"}},O={class:"ee2",style:{"background-color":"rgba(0, 100, 0, 0.567)","font-size":"13px"}},G={key:0},L={key:0},R={id:"f-dh1"},Y={id:"f-dh1"},H={id:"f-dh1"},J=["onClick"],K={style:{padding:"10px"}},W=["onClick"],X={class:"icon-div",style:{width:"100%",height:"100px","background-color":"#ccc",cursor:"pointer",display:"flex","align-items":"center","justify-content":"center"}},Z=["src"],_={key:1},$=["id","onChange"],ee=["onUpdate:modelValue"],te=["onUpdate:modelValue"],se=["onClick"],le=["onUpdate:modelValue"];function oe(s,e,m,g,o,r){const w=q("MessageBoxVue");return i(),n("main",{onClick:e[7]||(e[7]=(...l)=>r.handleClickOutside&&r.handleClickOutside(...l))},[N(w,{class:T([o.msg.msg_,"msg"]),message:o.msg.message,messageType:o.msg.type},null,8,["class","message","messageType"]),t("div",P,[e[8]||(e[8]=t("div",{id:"dhc1",style:{"margin-right":"10px"}},[t("button",{style:{"background-color":"rgba(15, 6, 73, 0.567)"}},[t("a",{href:"/reg/account",style:{color:"white"}},"Назад")])],-1)),t("div",S,[t("button",{onClick:e[0]||(e[0]=(...l)=>r.addQuestion&&r.addQuestion(...l)),style:{"background-color":"rgba(15, 6, 73, 0.567)"}}," Нове питання "),t("button",{onClick:e[1]||(e[1]=(...l)=>r.addV&&r.addV(...l)),style:{"margin-left":"10px","background-color":"rgba(6, 73, 33, 0.567)"}}," Нова відповідь "),t("button",{onClick:e[2]||(e[2]=(...l)=>r.delQ&&r.delQ(...l)),style:{"margin-left":"10px","background-color":"rgba(255, 0, 33, 0.467)"}}," Видалити питання "),t("button",{onClick:e[3]||(e[3]=l=>r.publishTest()),style:{"margin-left":"10px","background-color":"rgba(106, 73, 33, 0.567)"}}," Публікація тесту ")])]),t("div",D,[t("div",U,[t("div",{id:"dd1",onClick:e[6]||(e[6]=M(()=>{},["stop"]))},[t("div",I,[t("div",z,[o.selectedQ!=null?(i(),n("div",B,[t("div",E,[t("label",j,"Вибрано питання: "+C(o.questions[o.selectedQ].name),1)])])):b("",!0),o.selectedQ!=null?(i(),n("div",A,[t("div",O,[(i(!0),n(k,null,h(o.questions,(l,a)=>(i(),n("li",{key:a},[a===o.selectedQ?(i(),n("div",G,[e[9]||(e[9]=t("p",{for:""},"Вибрані правильні відповіді:",-1)),(i(!0),n(k,null,h(l.answers,(d,y)=>(i(),n("li",{key:y},[d.TF?(i(),n("p",L,C(d.name),1)):b("",!0)]))),128))])):b("",!0)]))),128))])])):b("",!0)]),t("div",R,[e[10]||(e[10]=t("label",{for:"TestName",style:{color:"white"}},"Ім'я тесту",-1)),e[11]||(e[11]=u()),e[12]||(e[12]=t("br",null,null,-1)),p(t("input",{type:"text",name:"TestName",id:"TN",placeholder:"Введіть ім'я тесту","onUpdate:modelValue":e[4]||(e[4]=l=>o.TName=l)},null,512),[[f,o.TName]])]),t("div",Y,[e[13]||(e[13]=t("label",{for:"TestID",style:{color:"white"}},"Ідентифікатор тесту",-1)),e[14]||(e[14]=u()),e[15]||(e[15]=t("br",null,null,-1)),p(t("input",{type:"text",name:"TestID",id:"TID",placeholder:"Ідентифікатор тесту","onUpdate:modelValue":e[5]||(e[5]=l=>o.stid=l),disabled:""},null,512),[[f,o.stid]])])]),t("div",H,[e[35]||(e[35]=t("label",{for:"TestID",style:{color:"white"}},"Питання",-1)),e[36]||(e[36]=u()),e[37]||(e[37]=t("br",null,null,-1)),e[38]||(e[38]=u()),e[39]||(e[39]=t("br",null,null,-1)),t("div",null,[(i(!0),n(k,null,h(o.questions,(l,a)=>(i(),n("li",{key:a,onClick:d=>r.SelectQ(a),class:"fdh"},[t("div",{id:"f-dh1-1",class:T({selected:o.selectedQ===a})},[e[18]||(e[18]=t("label",{for:"",style:{color:"white"}},"Картинка питання (не обов'язково)",-1)),t("div",K,[t("div",{onClick:d=>r.handleDivClick(a)},[t("div",X,[l.img?(i(),n("img",{key:0,src:l.img,alt:"icon",style:{width:"100%",height:"100%","border-radius":"50%"}},null,8,Z)):(i(),n("span",_,"Завантажити картинку"))]),t("input",{type:"file",id:"fileInput"+a,style:{display:"none","z-index":"2"},onChange:d=>r.handleFileChange(d,a)},null,40,$)],8,W)]),e[19]||(e[19]=t("label",{for:"",style:{color:"white"}},"Ім'я питання",-1)),e[20]||(e[20]=u()),e[21]||(e[21]=t("br",null,null,-1)),p(t("input",{type:"text","onUpdate:modelValue":d=>l.name=d},null,8,ee),[[f,l.name]]),e[22]||(e[22]=u()),e[23]||(e[23]=t("br",null,null,-1)),e[24]||(e[24]=u()),e[25]||(e[25]=t("br",null,null,-1)),e[26]||(e[26]=t("label",{for:"",style:{color:"white"}},"Бали за правильну відповідь",-1)),e[27]||(e[27]=u()),e[28]||(e[28]=t("br",null,null,-1)),p(t("input",{type:"text","onUpdate:modelValue":d=>l.Points=d},null,8,te),[[f,l.Points]]),e[29]||(e[29]=u()),e[30]||(e[30]=t("br",null,null,-1)),e[31]||(e[31]=u()),e[32]||(e[32]=t("br",null,null,-1)),e[33]||(e[33]=t("label",{for:"",style:{color:"white"}},"Відповіді на питання",-1)),e[34]||(e[34]=t("br",null,null,-1)),(i(!0),n(k,null,h(l.answers,(d,y)=>(i(),n("li",{key:y},[t("div",{id:"f-dh1-2",class:T({selected2:d.TF}),onClick:v=>r.SelectV(y)},[e[16]||(e[16]=t("label",{for:"",style:{color:"white"}},"Текст відповіді",-1)),e[17]||(e[17]=t("br",null,null,-1)),p(t("input",{type:"text",name:"",id:"","onUpdate:modelValue":v=>d.name=v},null,8,le),[[f,d.name]])],10,se)]))),128))],2)],8,J))),128))])])])],512)])])}const ue=c(F,[["render",oe],["__scopeId","data-v-7a26e3fa"]]);export{ue as default};
