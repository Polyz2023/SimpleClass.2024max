import{a as l}from"./axios-CCb-kr4I.js";import"./index-VWaDGczM.js";import{_ as p,c as i,a as n,t as a,F as m,r as _,d as c,b as f,o as r}from"./index-DwtoKt1K.js";const g={props:["stid","yname"],data(){return{tdata:null,currindex:0,userp:0,ise:!1,d:null}},mounted(){l.post("http://localhost:7000/user/get/test",{stid:this.stid}).then(t=>{t.data&&t.data.ft?(this.tdata=t.data.ft,console.log("Test data got: ",this.tdata)):console.error("No data found in response")}).catch(t=>{console.error("Error at got some test data: ",t)})},methods:{Next(t){console.log(`Current question index: ${this.currindex}`),console.log(`Selected answer index: ${t}`);const e=this.tdata.questions[this.currindex],o=Number(e.Points);this.currindex<this.tdata.questions.length-1?(console.log(`Current question points: ${o}`),console.log(`Is correct answer: ${e.answers[t].TF}`),e.answers[t].TF&&(isNaN(o)?console.error(`Invalid points value after conversion: ${o}`):(this.userp+=o,console.log(`Correct answer! Points added: ${o}. Total points: ${this.userp}`))),this.currindex++):(console.log(`Final question points: ${o}`),console.log(`Is correct answer on the final question: ${e.answers[t].TF}`),e.answers[t].TF&&(isNaN(o)?console.error(`Invalid points value after conversion: ${o}`):(this.userp+=o,console.log(`Correct answer on the last question! Points added: ${o}. Total points: ${this.userp}`))),this.ise=!0,this.EndTest())},async EndTest(){if(this.ise){const t={testname:this.tdata.name,yName:this.yname,points:this.userp,uid:this.tdata.uid};try{const e=await l.post("http://localhost:7000/user/send/test",{message:{e1:`Test name: ${t.testname}`,e2:`People: ${t.yName}`,e3:`Points: ${t.points}`},uid:t.uid});console.log("Succefuly test send: ",e)}catch(e){console.error("Error to send test: ",e)}}}},watch:{}},x={id:"dh1"},v={id:"dhc1"},q={key:0},w={key:1},y={id:"dh2"},N={key:0,id:"form",class:"slide-in"},T=["onClick"],k={key:0,id:"modal"},C={class:"modal-content"},F={for:""};function b(t,e,o,E,s,u){return r(),i("main",null,[n("div",x,[n("div",v,[s.tdata&&s.tdata.questions&&s.tdata.questions.length>0?(r(),i("h2",q,a(s.tdata.questions[s.currindex].name),1)):(r(),i("h2",w,"Завантаження..."))])]),n("div",y,[s.tdata&&s.tdata.questions&&s.tdata.questions.length>0?(r(),i("div",N,[(r(!0),i(m,null,_(s.tdata.questions[s.currindex].answers||[],(h,d)=>(r(),i("li",{onClick:I=>u.Next(d),id:"f-dh1",key:d},[n("label",null,a(h.name),1)],8,T))),128))])):c("",!0)]),s.ise?(r(),i("div",k,[n("div",C,[n("h1",null,a(s.tdata.name),1),n("h2",null,"Тест створив "+a(s.tdata.tname),1),e[0]||(e[0]=f()),e[1]||(e[1]=n("br",null,null,-1)),n("h3",F,"Ваші бали: "+a(s.userp),1)])])):c("",!0)])}const V=p(g,[["render",b],["__scopeId","data-v-951a4bc0"]]);export{V as default};
