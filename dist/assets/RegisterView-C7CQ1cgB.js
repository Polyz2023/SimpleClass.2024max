import{a as g}from"./axios-CCb-kr4I.js";import{M as h}from"./MessageBox-DVSaPNFq.js";import{_ as k,c as u,a as v,n as x,b as s,w as r,v as m,d as n,e as f,r as w,o as a}from"./index-DaybQjpB.js";const S={components:{MessageBoxVue:h},data(){return{isReg:!1,selectedFile:null,profilePicture:null,username:"",email:null,password:null,tname:null,token:null,isSubmitting:!1,msg:{type:"info",message:"Test",msg_:"z_Minus"}}},methods:{handleDivClick(){this.$refs.fileInput.click()},handleFileChange(l){const e=l.target.files[0];if(e){const d=new FileReader;d.onload=p=>{this.profilePicture=p.target.result},d.readAsDataURL(e),this.selectedFile=e}},async SignUp(){if(!this.isSubmitting){this.isSubmitting=!0;try{const l=await g.post("/register/sign/up",{username:this.username,password:this.password,email:this.email,IMG:this.profilePicture,tname:this.tname});localStorage.setItem("SC-token",l.data.token),console.log("Token saved:",l.data.token),this.$router.push("/reg/account")}catch(l){this.MSGAnim("Помилка: пароль маленький, або не вірний формат пошти","error"),l.code==="auth/missing-password"?this.MSGAnim("Помилка: пропущений пароль","error"):l.code==="auth/invalid-email"?this.MSGAnim("Неправильний формат пошти","error"):l.code==="auth/too-many-requests"?(console.error("Слишком много запросов. Попробуйте снова через некоторое время."),setTimeout(()=>{this.isSubmitting=!1},1e3)):console.error("Ошибка при регистрации: ",l)}finally{this.isSubmitting=!1}}},async SignIn(){try{const l=await g.post("/register/sign/in",{password:this.password,email:this.email});l.data.token?(localStorage.setItem("SC-token",l.data.token),console.log("Token saved:",l.data.token),setTimeout(()=>{this.$router.push("/reg/account")},1e3)):this.MSGAnim("Полмилка входу","error")}catch(l){this.MSGAnim("Полмилка входу","error"),console.error("Error async SignIn(): ",l)}},MSGAnim(l,e){this.msg.message=l,this.msg.type=e,this.msg.msg_="",this.$nextTick(()=>{this.msg.msg_="z_Plus",setTimeout(()=>{this.msg.msg_="z_Minus"},3e3)})}}},b={id:"dh2"},C={key:0,id:"form",class:"slide-in"},M={style:{"text-align":"center","margin-top":"20px",color:"white"}},V={key:1,id:"form",class:"slide-in"},c={style:{display:"flex","justify-content":"center","margin-top":"10px"}},T=["src"],R={key:1},I=["disabled"],U={style:{"text-align":"center","margin-top":"20px",color:"white"}};function A(l,e,d,p,t,o){const y=w("MessageBoxVue");return a(),u("main",null,[v(y,{class:x([t.msg.msg_,"msg"]),message:t.msg.message,messageType:t.msg.type},null,8,["class","message","messageType"]),e[26]||(e[26]=s("div",{id:"dh1"},[s("div",null,[s("h1",null,"SimpleClass"),s("p",{style:{"text-align":"center"}},"Тестовий час для вчителів")])],-1)),s("div",b,[t.isReg?f("",!0):(a(),u("div",C,[s("div",null,[e[12]||(e[12]=s("h1",{style:{"text-align":"center",color:"white"}},"Ввійти в аккаунт",-1)),r(s("input",{type:"email",class:"i-email",placeholder:"Пошта","onUpdate:modelValue":e[0]||(e[0]=i=>t.email=i)},null,512),[[m,t.email]]),e[13]||(e[13]=n()),e[14]||(e[14]=s("br",null,null,-1)),r(s("input",{type:"password",class:"i-pass",placeholder:"Пароль","onUpdate:modelValue":e[1]||(e[1]=i=>t.password=i)},null,512),[[m,t.password]]),e[15]||(e[15]=n()),e[16]||(e[16]=s("br",null,null,-1)),s("button",{onClick:e[2]||(e[2]=i=>o.SignIn())},"Вхід")]),s("div",M,[e[17]||(e[17]=n(" Не маєте аккаунту? ")),s("a",{href:"#",style:{color:"#36629c"},onClick:e[3]||(e[3]=i=>this.isReg=!this.isReg)},"Зареєструватися"),e[18]||(e[18]=n(" або ")),e[19]||(e[19]=s("a",{href:"/test/jointest",style:{color:"#36629c"}},"Приєднатися до тесту",-1))])])),t.isReg?(a(),u("div",V,[s("div",null,[e[20]||(e[20]=s("h1",{style:{"text-align":"center",color:"white"}},"Реєстрація для вчителя",-1)),r(s("input",{type:"email",class:"i-email",placeholder:"Пошта","onUpdate:modelValue":e[4]||(e[4]=i=>t.email=i)},null,512),[[m,t.email]]),e[21]||(e[21]=n()),e[22]||(e[22]=s("br",null,null,-1)),r(s("input",{type:"password",class:"i-pass",placeholder:"Пароль","onUpdate:modelValue":e[5]||(e[5]=i=>t.password=i)},null,512),[[m,t.password]]),e[23]||(e[23]=n()),e[24]||(e[24]=s("br",null,null,-1)),r(s("input",{type:"text",placeholder:"Системне ім'я (на англійскій без пробілів)","onUpdate:modelValue":e[6]||(e[6]=i=>t.username=i),maxlength:"50"},null,512),[[m,t.username]]),r(s("input",{type:"text",placeholder:"Ім'я вчителя","onUpdate:modelValue":e[7]||(e[7]=i=>t.tname=i),maxlength:"50"},null,512),[[m,t.tname]]),s("div",c,[s("div",{class:"icon-div",onClick:e[8]||(e[8]=(...i)=>o.handleDivClick&&o.handleDivClick(...i)),style:{width:"100px",height:"100px","border-radius":"50%","background-color":"#ccc",cursor:"pointer",display:"flex","align-items":"center","justify-content":"center"}},[t.profilePicture?(a(),u("img",{key:0,src:t.profilePicture,alt:"icon",style:{width:"100%",height:"100%","border-radius":"50%"}},null,8,T)):(a(),u("span",R,"Завантажити картинку"))]),s("input",{type:"file",ref:"fileInput",style:{display:"none"},onChange:e[9]||(e[9]=(...i)=>o.handleFileChange&&o.handleFileChange(...i))},null,544)]),s("button",{disabled:t.isSubmitting,onClick:e[10]||(e[10]=i=>o.SignUp())},"Зареєструватися",8,I)]),s("div",U,[e[25]||(e[25]=n(" Маєте аккаунт? ")),s("a",{href:"#",style:{color:"#36629c"},onClick:e[11]||(e[11]=i=>this.isReg=!this.isReg)},"Вхід")])])):f("",!0)])])}const P=k(S,[["render",A],["__scopeId","data-v-0f8f004e"]]);export{P as default};
