import{a as V}from"./axios-CCb-kr4I.js";import{j as C}from"./index-VWaDGczM.js";import{M as x}from"./MessageBox-BeEvVciz.js";import{_ as Q,c as d,a as N,n as p,b as t,t as P,e as h,h as q,d as i,w as m,v as a,F as k,g as v,r as M,o as u}from"./index-CEQv2Gqn.js";const S={components:{MessageBoxVue:x},data(){return{TName:null,TP:0,stid:`${Math.floor(Math.random()*99999999)+1}`,questions:[{name:"Do you like SimpleClass? ^^",Points:0,answers:[{name:"No (i am very angry)",TF:!1},{name:"Yes (i am very fun)",TF:!0}]}],selectedQ:null,usdata:null,msg:{type:"info",message:"Test",msg_:"z_Minus"}}},mounted(){const e=localStorage.getItem("SC-token");if(e)try{const s=C(e);this.usdata=s,console.log("Decodet data at mounted: ",s)}catch(s){console.error("Error decoded data at mounted: ",s)}},methods:{handleClickOutside(e){this.$refs.form.contains(e.target)||(this.selectedQ=null)},async publishTest(){this.updateTotalPoints();try{const e=await V.post("/user/create/test",{TName:this.TName,stid:this.stid,questions:this.questions,uid:this.usdata.user_id,TP:this.TP});this.MSGAnim("Тест опубліковано","success"),console.log("Create test successfully:",e)}catch(e){console.error("Error at creating test: ",e)}},addQuestion(){this.questions.push({name:"",Points:1,answers:[{name:"Нове питання",TF:!1}]}),this.updateTotalPoints()},addV(){this.questions[this.selectedQ].answers.push({name:"New answer",TF:!1})},SelectQ(e){this.selectedQ=e},delQ(){this.questions.splice(this.selectedQ,1),this.selectedQ=null,this.updateTotalPoints()},printStr(e){console.log(e)},SelectV(e){const s=this.questions[this.selectedQ];s&&(s.answers.forEach((f,b)=>{f.TF=b===e}),console.log(this.questions))},updateTotalPoints(){this.TP=this.questions.reduce((e,s)=>e+(Number(s.Points)||0),0)},MSGAnim(e,s){this.msg.message=e,this.msg.type=s,this.msg.msg_="",this.$nextTick(()=>{this.msg.msg_="z_Plus",setTimeout(()=>{this.msg.msg_="z_Minus"},3e3)})}},watch:{questions:{handler(){this.updateTotalPoints()},deep:!0}}},D={id:"dh1"},F={id:"dhc1"},U={key:0,id:"dhc1",style:{"margin-left":"10px"}},B={class:"ee1",style:{"background-color":"rgba(15, 6, 73, 0.567)","font-size":"13px"}},I={for:""},z={id:"dh2"},E={id:"form",ref:"form",class:"slide-in"},O={style:{"margin-right":"20px"}},j={id:"f-dh1"},A={id:"f-dh1"},G={id:"f-dh1"},L=["onClick"],Y=["onUpdate:modelValue"],H=["onUpdate:modelValue"],J=["onClick"],K=["onUpdate:modelValue"];function R(e,s,f,b,o,n){const w=M("MessageBoxVue");return u(),d("main",{onClick:s[7]||(s[7]=(...l)=>n.handleClickOutside&&n.handleClickOutside(...l))},[N(w,{class:p([o.msg.msg_,"msg"]),message:o.msg.message,messageType:o.msg.type},null,8,["class","message","messageType"]),t("div",D,[s[8]||(s[8]=t("div",{id:"dhc1",style:{"margin-right":"10px"}},[t("button",{style:{"background-color":"rgba(15, 6, 73, 0.567)"}},[t("a",{href:"/reg/account",style:{color:"white"}},"Назад")])],-1)),t("div",F,[t("button",{onClick:s[0]||(s[0]=(...l)=>n.addQuestion&&n.addQuestion(...l)),style:{"background-color":"rgba(15, 6, 73, 0.567)"}}," Нове питання "),t("button",{onClick:s[1]||(s[1]=(...l)=>n.addV&&n.addV(...l)),style:{"margin-left":"10px","background-color":"rgba(6, 73, 33, 0.567)"}}," Нова відповідь "),t("button",{onClick:s[2]||(s[2]=(...l)=>n.delQ&&n.delQ(...l)),style:{"margin-left":"10px","background-color":"rgba(255, 0, 33, 0.467)"}}," Видалити питання "),t("button",{onClick:s[3]||(s[3]=l=>n.publishTest()),style:{"margin-left":"10px","background-color":"rgba(106, 73, 33, 0.567)"}}," Публікація тесту ")]),o.selectedQ!=null?(u(),d("div",U,[t("div",B,[t("label",I,"Вибрано питання: "+P(o.questions[o.selectedQ].name),1)])])):h("",!0)]),t("div",z,[t("div",E,[t("div",{id:"dd1",onClick:s[6]||(s[6]=q(()=>{},["stop"]))},[t("div",O,[t("div",j,[s[9]||(s[9]=t("label",{for:"TestName",style:{color:"white"}},"Ім'я тесту",-1)),s[10]||(s[10]=i()),s[11]||(s[11]=t("br",null,null,-1)),m(t("input",{type:"text",name:"TestName",id:"TN",placeholder:"Введіть ім'я тесту","onUpdate:modelValue":s[4]||(s[4]=l=>o.TName=l)},null,512),[[a,o.TName]])]),t("div",A,[s[12]||(s[12]=t("label",{for:"TestID",style:{color:"white"}},"Ідентифікатор тесту",-1)),s[13]||(s[13]=i()),s[14]||(s[14]=t("br",null,null,-1)),m(t("input",{type:"text",name:"TestID",id:"TID",placeholder:"Ідентифікатор тесту","onUpdate:modelValue":s[5]||(s[5]=l=>o.stid=l),disabled:""},null,512),[[a,o.stid]])])]),t("div",G,[s[33]||(s[33]=t("label",{for:"TestID",style:{color:"white"}},"Питання",-1)),s[34]||(s[34]=i()),s[35]||(s[35]=t("br",null,null,-1)),s[36]||(s[36]=i()),s[37]||(s[37]=t("br",null,null,-1)),t("div",null,[(u(!0),d(k,null,v(o.questions,(l,g)=>(u(),d("li",{key:g,onClick:r=>n.SelectQ(g),class:"fdh"},[t("div",{id:"f-dh1-1",class:p({selected:o.selectedQ===g})},[s[17]||(s[17]=t("label",{for:"",style:{color:"white"}},"Ім'я питання",-1)),s[18]||(s[18]=i()),s[19]||(s[19]=t("br",null,null,-1)),m(t("input",{type:"text","onUpdate:modelValue":r=>l.name=r},null,8,Y),[[a,l.name]]),s[20]||(s[20]=i()),s[21]||(s[21]=t("br",null,null,-1)),s[22]||(s[22]=i()),s[23]||(s[23]=t("br",null,null,-1)),s[24]||(s[24]=t("label",{for:"",style:{color:"white"}},"Бали за правильну відповідь",-1)),s[25]||(s[25]=i()),s[26]||(s[26]=t("br",null,null,-1)),m(t("input",{type:"text","onUpdate:modelValue":r=>l.Points=r},null,8,H),[[a,l.Points]]),s[27]||(s[27]=i()),s[28]||(s[28]=t("br",null,null,-1)),s[29]||(s[29]=i()),s[30]||(s[30]=t("br",null,null,-1)),s[31]||(s[31]=t("label",{for:"",style:{color:"white"}},"Відповіді на питання",-1)),s[32]||(s[32]=t("br",null,null,-1)),(u(!0),d(k,null,v(l.answers,(r,y)=>(u(),d("li",{key:y},[t("div",{id:"f-dh1-2",class:p({selected2:r.TF}),onClick:T=>n.SelectV(y)},[s[15]||(s[15]=t("label",{for:"",style:{color:"white"}},"Текст відповіді",-1)),s[16]||(s[16]=t("br",null,null,-1)),m(t("input",{type:"text",name:"",id:"","onUpdate:modelValue":T=>r.name=T},null,8,K),[[a,r.name]])],10,J)]))),128))],2)],8,L))),128))])])])],512)])])}const c=Q(S,[["render",R],["__scopeId","data-v-26988e76"]]);export{c as default};
