import{a as g}from"./axios-CCb-kr4I.js";import{_ as y,c as u,a as t,w as r,v as d,b as n,d as f,o as a}from"./index-CxeWZLd2.js";const k={data(){return{isReg:!1,selectedFile:null,profilePicture:null,username:"",email:null,password:null,tname:null,token:null,isSubmitting:!1}},methods:{handleDivClick(){this.$refs.fileInput.click()},handleFileChange(s){const e=s.target.files[0];if(e){const p=new FileReader;p.onload=m=>{this.profilePicture=m.target.result},p.readAsDataURL(e),this.selectedFile=e}},async SignUp(){if(!this.isSubmitting){this.isSubmitting=!0;try{const s=await g.post("/register/sign/up",{username:this.username,password:this.password,email:this.email,IMG:this.profilePicture,tname:this.tname});localStorage.setItem("SC-token",s.data.token),console.log("Token saved:",s.data.token),this.$router.push("/reg/account")}catch(s){s.code==="auth/too-many-requests"?(console.error("Слишком много запросов. Попробуйте снова через некоторое время."),setTimeout(()=>{this.isSubmitting=!1},5e3)):console.error("Ошибка при регистрации: ",s)}finally{error.code!=="auth/too-many-requests"&&(this.isSubmitting=!1)}}},async SignIn(){try{const s=await g.post("/register/sign/in",{password:this.password,email:this.email});localStorage.setItem("SC-token",s.data.token),console.log("Token saved:",s.data.token),this.$router.push("/reg/account")}catch(s){console.error("Error async SignIn(): ",s)}}}},v={id:"dh2"},w={key:0,id:"form",class:"slide-in"},x={style:{"text-align":"center","margin-top":"20px",color:"white"}},h={key:1,id:"form",class:"slide-in"},b={style:{display:"flex","justify-content":"center","margin-top":"10px"}},C=["src"],S={key:1},R=["disabled"],V={style:{"text-align":"center","margin-top":"20px",color:"white"}};function I(s,e,p,m,i,o){return a(),u("main",null,[e[26]||(e[26]=t("div",{id:"dh1"},[t("div",null,[t("h1",null,"SimpleClass"),t("p",{style:{"text-align":"center"}},"Тестовий час для вчителів")])],-1)),t("div",v,[i.isReg?f("",!0):(a(),u("div",w,[t("div",null,[e[12]||(e[12]=t("h1",{style:{"text-align":"center",color:"white"}},"Ввійти в аккаунт",-1)),r(t("input",{type:"email",class:"i-email",placeholder:"Пошта","onUpdate:modelValue":e[0]||(e[0]=l=>i.email=l)},null,512),[[d,i.email]]),e[13]||(e[13]=n()),e[14]||(e[14]=t("br",null,null,-1)),r(t("input",{type:"password",class:"i-pass",placeholder:"Пароль","onUpdate:modelValue":e[1]||(e[1]=l=>i.password=l)},null,512),[[d,i.password]]),e[15]||(e[15]=n()),e[16]||(e[16]=t("br",null,null,-1)),t("button",{onClick:e[2]||(e[2]=l=>o.SignIn())},"Вхід")]),t("div",x,[e[17]||(e[17]=n(" Не маєте аккаунту? ")),t("a",{href:"#",style:{color:"#36629c"},onClick:e[3]||(e[3]=l=>this.isReg=!this.isReg)},"Зареєструватися"),e[18]||(e[18]=n(" або ")),e[19]||(e[19]=t("a",{href:"/test/jointest",style:{color:"#36629c"}},"Приєднатися до тесту",-1))])])),i.isReg?(a(),u("div",h,[t("div",null,[e[20]||(e[20]=t("h1",{style:{"text-align":"center",color:"white"}},"Реєстрація для вчителя",-1)),r(t("input",{type:"email",class:"i-email",placeholder:"Пошта","onUpdate:modelValue":e[4]||(e[4]=l=>i.email=l)},null,512),[[d,i.email]]),e[21]||(e[21]=n()),e[22]||(e[22]=t("br",null,null,-1)),r(t("input",{type:"password",class:"i-pass",placeholder:"Пароль","onUpdate:modelValue":e[5]||(e[5]=l=>i.password=l)},null,512),[[d,i.password]]),e[23]||(e[23]=n()),e[24]||(e[24]=t("br",null,null,-1)),r(t("input",{type:"text",placeholder:"Системне ім'я (на англійскій без пробілів)","onUpdate:modelValue":e[6]||(e[6]=l=>i.username=l),maxlength:"50"},null,512),[[d,i.username]]),r(t("input",{type:"text",placeholder:"Ім'я вчителя","onUpdate:modelValue":e[7]||(e[7]=l=>i.tname=l),maxlength:"50"},null,512),[[d,i.tname]]),t("div",b,[t("div",{class:"icon-div",onClick:e[8]||(e[8]=(...l)=>o.handleDivClick&&o.handleDivClick(...l)),style:{width:"100px",height:"100px","border-radius":"50%","background-color":"#ccc",cursor:"pointer",display:"flex","align-items":"center","justify-content":"center"}},[i.profilePicture?(a(),u("img",{key:0,src:i.profilePicture,alt:"icon",style:{width:"100%",height:"100%","border-radius":"50%"}},null,8,C)):(a(),u("span",S,"Завантажити картинку"))]),t("input",{type:"file",ref:"fileInput",style:{display:"none"},onChange:e[9]||(e[9]=(...l)=>o.handleFileChange&&o.handleFileChange(...l))},null,544)]),t("button",{disabled:i.isSubmitting,onClick:e[10]||(e[10]=l=>o.SignUp())},"Зареєструватися",8,R)]),t("div",V,[e[25]||(e[25]=n(" Маєте аккаунт? ")),t("a",{href:"#",style:{color:"#36629c"},onClick:e[11]||(e[11]=l=>this.isReg=!this.isReg)},"Вхід")])])):f("",!0)])])}const D=y(k,[["render",I],["__scopeId","data-v-e3eafea7"]]);export{D as default};
