import{a as x}from"./axios-CCb-kr4I.js";import{j as C}from"./index-VWaDGczM.js";import{M as h}from"./MessageBox-DVSaPNFq.js";import{_ as N,c as n,a as M,n as k,b as s,h as P,t as Q,e as y,F as b,g as T,d as u,w as a,v as g,r as S,o as i}from"./index-DaybQjpB.js";const q={components:{MessageBoxVue:h},data(){return{TName:null,TP:0,stid:`${Math.floor(Math.random()*99999999)+1}`,questions:[{name:"Do you like SimpleClass? ^^",Points:0,NUMS:1,answers:[{name:"No (i am very angry)",TF:!1},{name:"Yes (i am very fun)",TF:!0}]}],selectedQ:null,usdata:null,msg:{type:"info",message:"Test",msg_:"z_Minus"}}},mounted(){const l=localStorage.getItem("SC-token");if(l)try{const e=C(l);this.usdata=e,console.log("Decodet data at mounted: ",e)}catch(e){console.error("Error decoded data at mounted: ",e)}},methods:{handleClickOutside(l){this.$refs.form.contains(l.target)||(this.selectedQ=null)},async publishTest(){this.updateTotalPoints();try{const l=await x.post("/user/create/test",{TName:this.TName,stid:this.stid,questions:this.questions,uid:this.usdata.user_id,TP:this.TP});this.MSGAnim("Тест опубліковано","success"),console.log("Create test successfully:",l)}catch(l){console.error("Error at creating test: ",l)}},addQuestion(){this.questions.push({name:"",Points:1,NUMS:0,answers:[{name:"Нове питання",TF:!1}]}),this.updateTotalPoints()},addV(){this.questions[this.selectedQ].answers.push({name:"New answer",TF:!1})},SelectQ(l){this.selectedQ=l},delQ(){this.questions.splice(this.selectedQ,1),this.selectedQ=null,this.updateTotalPoints()},printStr(l){console.log(l)},SelectV(l){const e=this.questions[this.selectedQ];e&&(e.answers.forEach((p,v)=>{v===l&&(p.TF=!p.TF,p.TF?e.NUMS+=1:e.NUMS-=1)}),console.log(this.questions))},updateTotalPoints(){this.TP=this.questions.reduce((l,e)=>l+(Number(e.Points)||0),0)},MSGAnim(l,e){this.msg.message=l,this.msg.type=e,this.msg.msg_="",this.$nextTick(()=>{this.msg.msg_="z_Plus",setTimeout(()=>{this.msg.msg_="z_Minus"},3e3)})}},watch:{questions:{handler(){this.updateTotalPoints()},deep:!0}}},U={id:"dh1"},F={id:"dhc1"},D={id:"dh2"},z={id:"form",ref:"form",class:"slide-in"},B={style:{"margin-right":"20px"}},I={id:"dh3"},E={key:0,id:"dhc1",style:{"margin-left":"10px"}},O={class:"ee1",style:{"background-color":"rgba(15, 6, 73, 0.567)","font-size":"13px"}},j={for:""},A={key:1,id:"dhc1",style:{"margin-left":"10px"}},G={class:"ee2",style:{"background-color":"rgba(0, 100, 0, 0.567)","font-size":"13px"}},L={key:0},Y={key:0},H={id:"f-dh1"},J={id:"f-dh1"},K={id:"f-dh1"},R=["onClick"],W=["onUpdate:modelValue"],X=["onUpdate:modelValue"],Z=["onClick"],c=["onUpdate:modelValue"];function _(l,e,p,v,o,r){const V=S("MessageBoxVue");return i(),n("main",{onClick:e[7]||(e[7]=(...t)=>r.handleClickOutside&&r.handleClickOutside(...t))},[M(V,{class:k([o.msg.msg_,"msg"]),message:o.msg.message,messageType:o.msg.type},null,8,["class","message","messageType"]),s("div",U,[e[8]||(e[8]=s("div",{id:"dhc1",style:{"margin-right":"10px"}},[s("button",{style:{"background-color":"rgba(15, 6, 73, 0.567)"}},[s("a",{href:"/reg/account",style:{color:"white"}},"Назад")])],-1)),s("div",F,[s("button",{onClick:e[0]||(e[0]=(...t)=>r.addQuestion&&r.addQuestion(...t)),style:{"background-color":"rgba(15, 6, 73, 0.567)"}}," Нове питання "),s("button",{onClick:e[1]||(e[1]=(...t)=>r.addV&&r.addV(...t)),style:{"margin-left":"10px","background-color":"rgba(6, 73, 33, 0.567)"}}," Нова відповідь "),s("button",{onClick:e[2]||(e[2]=(...t)=>r.delQ&&r.delQ(...t)),style:{"margin-left":"10px","background-color":"rgba(255, 0, 33, 0.467)"}}," Видалити питання "),s("button",{onClick:e[3]||(e[3]=t=>r.publishTest()),style:{"margin-left":"10px","background-color":"rgba(106, 73, 33, 0.567)"}}," Публікація тесту ")])]),s("div",D,[s("div",z,[s("div",{id:"dd1",onClick:e[6]||(e[6]=P(()=>{},["stop"]))},[s("div",B,[s("div",I,[o.selectedQ!=null?(i(),n("div",E,[s("div",O,[s("label",j,"Вибрано питання: "+Q(o.questions[o.selectedQ].name),1)])])):y("",!0),o.selectedQ!=null?(i(),n("div",A,[s("div",G,[(i(!0),n(b,null,T(o.questions,(t,m)=>(i(),n("li",{key:m},[m===o.selectedQ?(i(),n("div",L,[e[9]||(e[9]=s("p",{for:""},"Вибрані правильні відповіді:",-1)),(i(!0),n(b,null,T(t.answers,(d,f)=>(i(),n("li",{key:f},[d.TF?(i(),n("p",Y,Q(d.name),1)):y("",!0)]))),128))])):y("",!0)]))),128))])])):y("",!0)]),s("div",H,[e[10]||(e[10]=s("label",{for:"TestName",style:{color:"white"}},"Ім'я тесту",-1)),e[11]||(e[11]=u()),e[12]||(e[12]=s("br",null,null,-1)),a(s("input",{type:"text",name:"TestName",id:"TN",placeholder:"Введіть ім'я тесту","onUpdate:modelValue":e[4]||(e[4]=t=>o.TName=t)},null,512),[[g,o.TName]])]),s("div",J,[e[13]||(e[13]=s("label",{for:"TestID",style:{color:"white"}},"Ідентифікатор тесту",-1)),e[14]||(e[14]=u()),e[15]||(e[15]=s("br",null,null,-1)),a(s("input",{type:"text",name:"TestID",id:"TID",placeholder:"Ідентифікатор тесту","onUpdate:modelValue":e[5]||(e[5]=t=>o.stid=t),disabled:""},null,512),[[g,o.stid]])])]),s("div",K,[e[34]||(e[34]=s("label",{for:"TestID",style:{color:"white"}},"Питання",-1)),e[35]||(e[35]=u()),e[36]||(e[36]=s("br",null,null,-1)),e[37]||(e[37]=u()),e[38]||(e[38]=s("br",null,null,-1)),s("div",null,[(i(!0),n(b,null,T(o.questions,(t,m)=>(i(),n("li",{key:m,onClick:d=>r.SelectQ(m),class:"fdh"},[s("div",{id:"f-dh1-1",class:k({selected:o.selectedQ===m})},[e[18]||(e[18]=s("label",{for:"",style:{color:"white"}},"Ім'я питання",-1)),e[19]||(e[19]=u()),e[20]||(e[20]=s("br",null,null,-1)),a(s("input",{type:"text","onUpdate:modelValue":d=>t.name=d},null,8,W),[[g,t.name]]),e[21]||(e[21]=u()),e[22]||(e[22]=s("br",null,null,-1)),e[23]||(e[23]=u()),e[24]||(e[24]=s("br",null,null,-1)),e[25]||(e[25]=s("label",{for:"",style:{color:"white"}},"Бали за правильну відповідь",-1)),e[26]||(e[26]=u()),e[27]||(e[27]=s("br",null,null,-1)),a(s("input",{type:"text","onUpdate:modelValue":d=>t.Points=d},null,8,X),[[g,t.Points]]),e[28]||(e[28]=u()),e[29]||(e[29]=s("br",null,null,-1)),e[30]||(e[30]=u()),e[31]||(e[31]=s("br",null,null,-1)),e[32]||(e[32]=s("label",{for:"",style:{color:"white"}},"Відповіді на питання",-1)),e[33]||(e[33]=s("br",null,null,-1)),(i(!0),n(b,null,T(t.answers,(d,f)=>(i(),n("li",{key:f},[s("div",{id:"f-dh1-2",class:k({selected2:d.TF}),onClick:w=>r.SelectV(f)},[e[16]||(e[16]=s("label",{for:"",style:{color:"white"}},"Текст відповіді",-1)),e[17]||(e[17]=s("br",null,null,-1)),a(s("input",{type:"text",name:"",id:"","onUpdate:modelValue":w=>d.name=w},null,8,c),[[g,d.name]])],10,Z)]))),128))],2)],8,R))),128))])])])],512)])])}const le=N(q,[["render",_],["__scopeId","data-v-e2e15f10"]]);export{le as default};
